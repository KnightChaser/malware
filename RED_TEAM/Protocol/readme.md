# 📡 암호화 통신 프로토콜 (Encrypted Communication Protocol)

이 프로젝트는 AES와 RSA 암호화 방식을 활용하여 **클라이언트와 서버 간 안전한 데이터 통신**을 제공합니다. 클라이언트는 서버의 RSA 공개키로 AES 키를 암호화하여 전송하며, 이후 데이터는 AES를 통해 암호화하여 전송합니다. 본 프로토콜은 텍스트, 실행 파일, 이미지, 비디오 등 다양한 데이터 유형을 지원합니다.

## 🛠 기능 개요

- **안전한 키 교환**: AES 키를 RSA 암호화하여 전송
- **다양한 데이터 유형** 지원: 텍스트, 실행 파일, 이미지, 비디오, JSON 데이터 등
- **ProtocolMessage 클래스**: 직렬화, 암호화, 역직렬화 처리
- **서버와 클라이언트 구조**: RSA 공개 키 교환을 통한 AES 키 암호화/복호화

## 📁 프로젝트 구조
📦 프로젝트 루트 

├─ protocol_message.py # ProtocolMessage 클래스 정의 

├─ client.py # 클라이언트 코드 

└─ server.py # 서버 코드


## 🚀 설치

1. **의존성 설치**:
   ```bash
   pip install pycryptodome
2. **설치 후**이 저장소를 클론합니다.
   ```bash
   git clone <repository-url>
   cd <repository-name>

## 📋 사용법
1. **서버 시작**
   ```bash
   python server.py
2. **클라이언트에서 데이터 전송** : 텍스트 또는 파일 전송 시 다음 명령을 실행합니다
   ```bash
   # 텍스트 전송 예시
   send_data_to_server(text="Hello, this is a test message")

   # 파일 전송 예시
   send_data_to_server(file_path="path/to/your/file", request_type="EXECUTABLE")

## 🔍 보안 설계
### AES 및 RSA 암호화 흐름
- AES 암호화: 데이터 암호화에 사용됩니다.
- RSA 암호화: 클라이언트와 서버 간 AES 키 교환 보호
- 랜덤 패딩 및 데이터 삽입: 추가 보안성을 위해 암호화된 데이터에 무작위성을 추가합니다.

## 💡 핵심 코드 설명
### ProtocolMessage 클래스

ProtocolMessage 클래스는 데이터 직렬화, 암호화, 복호화에 필요한 핵심 기능을 수행합니다.
```python
   class ProtocolMessage:
    def __init__(self, session_id, request_type, data_type, payload):
        # 메시지의 기본 정보와 데이터를 초기화
        self.session_id = session_id
        self.request_type = request_type
        self.data_type = data_type
        self.payload = payload
        self.key = ProtocolMessage.shared_key  # 공유된 AES 키 사용

```
- __init__: 메시지의 세션 ID, 요청 유형, 데이터 유형, 페이로드 등을 초기화합니다. 공유된 AES 키는 ProtocolMessage.shared_key에서 가져옵니다.
- encrypt_payload: AES를 사용하여 페이로드를 암호화합니다.
```python
   def encrypt_payload(self):
    cipher = AES.new(self.key, AES.MODE_GCM)
    ciphertext, tag = cipher.encrypt_and_digest(self.payload)
    return cipher.nonce, ciphertext, tag
```
- decrypt_payload: 복호화된 페이로드를 복원합니다.
- serialize: 암호화된 페이로드와 메타데이터를 직렬화하여 전송 가능한 바이트 형태로 변환합니다.

## 📜 라이선스
MIT 라이선스 하에 배포됩니다.

## 🤝 기여
1. 이 저장소를 포크합니다.
2. 새로운 기능에 대한 브랜치를 생성합니다 (git checkout -b feature/AmazingFeature).
3. 변경 사항을 커밋합니다 (git commit -m 'Add some AmazingFeature').
4. 브랜치에 푸시합니다 (git push origin feature/AmazingFeature).
5. Pull Request를 엽니다.

